# 2026-02-18 发布 v0.2.0（Core）

## 变更背景 / 目标
为了让上游（Server/SDK/Win）在不依赖本地 `replace` / `go.work` 的情况下也能稳定拉取并构建，需要发布一个可拉取的 Core 版本基线。

本次发布目标：
- 发布并推送 `github.com/yttydcs/myflowhub-core@v0.2.0`
- 作为 HeaderTcp v2（32B）与 Core 路由规则统一（Major 分流）的上游依赖基线

## 具体变更内容（相对 v0.1.0）
### 关键变更（上游强依赖）
- **HeaderTcp v2（32B）**：引入 `magic/ver/hdr_len/hop_limit/route_flags/trace_id` 等字段，并完成编解码与校验。
- **Core 路由规则收敛**：
  - `MajorCmd`：不再由 Core 自动转发，必须进入 handler。
  - `MajorMsg/MajorOKResp/MajorErrResp`：走 Core 快速转发（发生转发时递减 `hop_limit`）。

> 以上详细设计与实现说明见：`docs/change/2026-02-10_hdrtcp-v2.md`。

### 其他能力增量（API/行为扩展）
- 连接/源校验逻辑增强（更严格的连接验证，预路由处理特定控制帧）。
- 子协议框架增强：补齐 `BaseAction/BaseSubProcess/ActionBaseSubProcess` 等基础类型与注册/初始化校验。
- 新增/扩展事件总线能力（bucket/bus + 发布订阅）。
- 配置与权限相关能力补齐：MapConfig 扩展、keys 枚举、节点索引与权限快照等。

## plan.md 任务映射
- CORESEM1：归档发布文档 ✅
- CORESEM2：回归测试（`GOWORK=off go test ./...`）✅

## 测试与验证
- 回归：`GOWORK=off go test ./... -count=1 -p 1`

## 潜在影响
- 上游若仍停留在 HeaderTcp v1（`myflowhub-core@v0.1.0`）将无法与 v2 wire 互通；需要与 Server/Win/Proto/SDK 同步升级。

## 回滚方案
- 不删除/改写已发布 tag；如发现问题，通过发布更高 patch 版本（例如 `v0.2.1`）修复。
